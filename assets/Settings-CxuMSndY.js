import{y as V,r as C,j as e,F as k,u as b,U as N,B as f,t as v,s as g,R as y,C as j}from"./index-8ZxL3BOu.js";import{H as A}from"./HookForm-BDC8bDrS.js";import{I as d}from"./Input-O4w2vmvy.js";import{a as P,c as E,d as R,u as B,F as m}from"./index.esm-CbKD2Vy3.js";import{C as i}from"./FormSelect-BLxoVz7i.js";/**
 * @license hugeicons-react v0.1.3
 *
 * See the LICENSE file in the root directory of this source tree.
 */const D=V("Camera01Icon",[["path",{d:"M7 6.00049C5.77936 6.00415 5.10383 6.03335 4.54873 6.26634C3.7712 6.59269 3.13801 7.19552 2.76811 7.96158C2.46618 8.58687 2.41677 9.38799 2.31796 10.9902L2.16312 13.5009C1.91739 17.4853 1.79452 19.4775 2.96369 20.7388C4.13285 22 6.10252 22 10.0419 22H13.9581C17.8975 22 19.8672 22 21.0363 20.7388C22.2055 19.4775 22.0826 17.4853 21.8369 13.5009L21.682 10.9902C21.5832 9.38799 21.5338 8.58687 21.2319 7.96158C20.862 7.19552 20.2288 6.59269 19.4513 6.26634C18.8962 6.03335 18.2206 6.00415 17 6.00049",stroke:"currentColor",key:"k0"}],["path",{d:"M17 7L16.1142 4.78543C15.732 3.82996 15.3994 2.7461 14.4166 2.25955C13.8924 2 13.2616 2 12 2C10.7384 2 10.1076 2 9.58335 2.25955C8.6006 2.7461 8.26801 3.82996 7.88583 4.78543L7 7",stroke:"currentColor",key:"k1"}],["path",{d:"M15.5 14C15.5 15.933 13.933 17.5 12 17.5C10.067 17.5 8.5 15.933 8.5 14C8.5 12.067 10.067 10.5 12 10.5C13.933 10.5 15.5 12.067 15.5 14Z",stroke:"currentColor",key:"k2"}],["path",{d:"M11.9998 6H12.0088",stroke:"currentColor",key:"k3"}]]),H=({...s})=>{const{control:t,setValue:a,getValues:o}=P(),n=o("avatar"),c=C.useRef(),[u,h]=C.useState();C.useEffect(()=>{typeof n=="string"&&h(n)},[n]);const r=()=>{c.current.click()},x=l=>{const p=l.target.files[0];a("avatar",p);const w=URL.createObjectURL(p);h(w)};return e.jsxs(E,{...s,className:"mb-3",children:[e.jsx(R,{className:"mb-1",children:"Avatar"}),e.jsxs(k,{style:{height:"7rem",width:"7rem"},className:"border rounded position-relative",justify:"center",alignItems:"end",children:[e.jsx("img",{src:u,height:"100%",className:"overflow-hidden rounded-2"}),e.jsx("input",{type:"file",name:"avatar",hidden:!0,ref:c,...s.control,onChange:x}),e.jsx(k,{className:"position-absolute w-100 py-2 cursor-pointer text-white rounded",justify:"center",style:{background:"linear-gradient(0deg, rgb(0 0 0 / 77%), transparent)"},onClick:r,children:e.jsx(D,{})})]})]})},q=({readonly:s,readonlyUser:t})=>{const{user:a}=b(),{userDetails:o,setUserDetails:n}=N(),c={emailAddress:a==null?void 0:a.emailAddress,avatar:o==null?void 0:o.avatar,...o==null?void 0:o.profile},u={emailAddress:t==null?void 0:t.emailAddress,avatar:t==null?void 0:t.avatar,...t==null?void 0:t.profile},h=async(r,x)=>{try{const{avatar:p,fullName:w,phoneNumber:S,status:F,aboutMe:M}=r;var l=new FormData;l.append("avatar",p),l.append("fullName",w),l.append("phoneNumber",S),l.append("status",F),l.append("aboutMe",M);const L=await v(g({url:`user/${a.emailAddress}/profile`,method:"PUT",headers:{"Content-Type":"multipart/form-data"},data:l}));n(L.data)}catch(p){console.log(p)}};return e.jsxs(i,{children:[e.jsx(i.Header,{children:e.jsx("h3",{className:"mb-0",children:"Details"})}),e.jsxs(A,{onSubmit:h,defaultValues:s?u:c,children:[e.jsxs(i.Body,{children:[e.jsx(H,{control:{disabled:s}}),e.jsx(d,{field:{state:"emailAddress",title:"Email Address"},control:{disabled:!0}}),e.jsx(d,{field:{state:"fullName",title:"Full Name"},control:{disabled:s}}),e.jsx(d,{field:{state:"phoneNumber",title:"Phone Number"},control:{disabled:s}}),e.jsxs(d,{field:{state:"status",title:"Status",type:"select"},control:{defaultValue:"onDuty",disabled:s},required:!1,children:[e.jsx("option",{value:"leave",children:"Leave"}),e.jsx("option",{value:"onDuty",children:"On Duty"}),e.jsx("option",{value:"offDuty",children:"Off Duty"})]}),e.jsx(d,{field:{state:"aboutMe",title:"About Me"},required:!1,control:{as:"textarea",placeholder:"Describe about you...",style:{fontSize:"14px"},rows:5,disabled:s}})]}),!s&&e.jsxs(i.Footer,{className:"d-flex justify-content-end",children:[e.jsx(f,{size:"sm",variant:"secondary",type:"reset",className:"me-3",children:"reset"}),e.jsx(f,{size:"sm",type:"submit",children:"Update"})]})]})]})},I=({readonly:s,readonlyUser:t})=>{const{userDetails:a,setUserDetails:o}=N(),{user:n}=b(),{register:c,watch:u}=B({values:a==null?void 0:a.accountSettings}),h=async()=>{const x=u();await v(g.put(`/user/${n.emailAddress}/accountSettings`,x)).then(l=>o(l.data))},r=x=>c(x,{onChange:h});return e.jsxs(i,{children:[e.jsx(i.Header,{className:"fs-4",children:"Account Settings"}),e.jsxs(i.Body,{children:[e.jsxs("div",{className:"mb-3",children:["Who can see your Profile?",e.jsx(m.Check,{type:"radio",...r("whoCanView"),value:"everyone",label:"Everyone",disabled:s}),e.jsx(m.Check,{type:"radio",...r("whoCanView"),value:"myCustomers",label:"My Customers",disabled:s}),e.jsx(m.Check,{type:"radio",...r("whoCanView"),value:"onlyMe",label:"Only me",disabled:s})]}),e.jsxs("div",{children:["Allowed Communication ways?",e.jsx(m.Check,{type:"checkbox",...r("communicateViaEmail"),label:"Email address",disabled:s}),e.jsx(m.Check,{type:"checkbox",...r("communicateViaPhoneNumber"),label:"Phone number",disabled:s})]}),e.jsx("hr",{}),e.jsx(m.Check,{className:"mb-2",type:"checkbox",...r("allowDeleteLogs"),label:"Delete Activity logs after 30 days",disabled:s}),e.jsx(m.Check,{type:"checkbox",...r("showAboutMe"),label:"Allow user to show your About me.",disabled:s})]})]})},O=()=>{const{user:s}=b(),t=async(a,o)=>{const{oldPassword:n,newPassword:c}=a;await v(g.put(`/user/${s.emailAddress}/updatePassword`,{oldPassword:n,newPassword:c})).catch(u=>console.log(u))};return e.jsx(i,{children:e.jsxs(A,{onSubmit:t,children:[e.jsx(i.Header,{className:"fs-4",children:"Update Password"}),e.jsxs(i.Body,{children:[e.jsx(d,{field:{state:"oldPassword",title:"Old Password",type:"password"},required:!1}),e.jsx(d,{field:{state:"newPassword",title:"New Password",type:"password"},required:!1}),e.jsx(z,{})]}),e.jsx(i.Footer,{className:"d-grid ",children:e.jsx(f,{size:"sm",className:"d-block",type:"submit",children:"Update Password"})})]})})},z=()=>{const{watch:s}=P(),t=s("newPassword");return e.jsx(d,{field:{state:"confirmPassword",title:"Confirm Password",type:"password"},required:!1,validate:{validConfirm:a=>a===t||"Mismatch Confirm password."}})},Z=({readonly:s,readonlyUser:t})=>{const{isCustomer:a}=b();return e.jsxs(y,{className:"g-4",children:[e.jsx(j,{sm:6,lg:7,children:e.jsx(q,{readonly:s,readonlyUser:t})}),e.jsx(j,{children:e.jsxs(y,{className:"g-3 flex-column",children:[!a&&e.jsx(j,{children:e.jsx(I,{readonly:s,readonlyUser:t})}),e.jsx(j,{children:!s&&e.jsx(O,{})})]})})]})};export{Z as S};
